<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tracker Nutritionnel</title>
    <!-- Librairie externe pour les graphiques -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Liaison vers le fichier de styles CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="container">
        <h1>üçΩÔ∏è Tracker Nutritionnel</h1>

        <!-- =================== NAVIGATION PAR ONGLETS =================== -->
        <div class="nav-tabs">
            <button class="nav-tab active" data-tab="tracker">üìÖ Suivi Quotidien</button>
            <button class="nav-tab" data-tab="stats">üìä Statistiques</button>
            <button class="nav-tab" data-tab="goals">üéØ Objectifs</button>
            <button class="nav-tab" data-tab="foods">ü•ó Aliments</button>
            <button class="nav-tab" data-tab="settings">‚öôÔ∏è Param√®tres</button>
        </div>

        <!-- =================== CONTENU DE L'ONGLET "SUIVI QUOTIDIEN" =================== -->
        <div id="tracker-tab" class="tab-content active">
            <!-- En-t√™te du calendrier -->
            <div class="calendar-header">
                <button id="prev-day-btn">‚Üê Jour Pr√©c√©dent</button>
                <h2 id="currentDate"></h2>
                <div>
                    <button id="today-btn" class="today-btn">Aujourd'hui</button>
                    <button id="next-day-btn">Jour Suivant ‚Üí</button>
                </div>
            </div>

            <!-- R√©sum√© nutritionnel de la journ√©e avec barres de progression -->
            <div class="summary-modern" id="summary">
                <div class="progress-card">
                    <div class="progress-header">
                        <span class="progress-label">üî• Calories</span>
                        <span class="progress-values" id="totalCalories">0 / 0 kcal</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="caloriesProgress" style="width: 0%;"></div>
                    </div>
                </div>
                <div class="progress-card">
                    <div class="progress-header">
                        <span class="progress-label">ü•© Prot√©ines</span>
                        <span class="progress-values" id="totalProteins">0 / 0 g</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="proteinsProgress" style="width: 0%;"></div>
                    </div>
                </div>
                <div class="progress-card">
                    <div class="progress-header">
                        <span class="progress-label">üçû Glucides</span>
                        <span class="progress-values" id="totalCarbs">0 / 0 g</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="carbsProgress" style="width: 0%;"></div>
                    </div>
                </div>
                <div class="progress-card">
                    <div class="progress-header">
                        <span class="progress-label">ü•ë Lipides</span>
                        <span class="progress-values" id="totalFats">0 / 0 g</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="fatsProgress" style="width: 0%;"></div>
                    </div>
                </div>
                <div class="progress-card">
                    <div class="progress-header">
                        <span class="progress-label">üç¨ Sucres</span>
                        <span class="progress-values" id="totalSugars">0 g</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill secondary" id="sugarsProgress" style="width: 0%;"></div>
                    </div>
                </div>
                <div class="progress-card">
                    <div class="progress-header">
                        <span class="progress-label">üåæ Fibres</span>
                        <span class="progress-values" id="totalFibers">0 g</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="fibersProgress" style="width: 0%; background: linear-gradient(135deg, #84cc16 0%, #65a30d 100%);"></div>
                    </div>
                </div>
                <div class="progress-card weight-card">
                    <div class="progress-header">
                        <span class="progress-label">‚öñÔ∏è Poids</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px; margin-top: 8px;">
                        <input type="number" id="weightInput" step="0.1" placeholder="kg" style="flex: 1; padding: 8px; border: 2px solid var(--color-border); border-radius: 8px; font-size: 1em;">
                        <button id="saveWeightBtn" class="quick-action-btn">üíæ</button>
                    </div>
                </div>
            </div>

            <!-- Section Hydratation et Activit√© -->
            <div class="wellness-section">
                <!-- Hydratation -->
                <div class="wellness-card water-card">
                    <div class="wellness-header">
                        <h3>üíß Hydratation</h3>
                        <span class="wellness-target">Objectif: <span id="waterGoal">2000</span> ml</span>
                    </div>
                    <div class="wellness-progress">
                        <div class="progress-bar">
                            <div class="progress-fill water-fill" id="waterProgress" style="width: 0%;"></div>
                        </div>
                        <span class="wellness-value" id="waterValue">0 ml / 2000 ml</span>
                    </div>
                    <div class="wellness-actions">
                        <button class="water-btn add-btn" data-amount="300">+300ml</button>
                        <button class="water-btn add-btn" data-amount="500">+500ml</button>
                        <button class="water-btn add-btn" data-amount="1000">+1L</button>
                        <button class="water-btn edit-btn" id="editWaterBtn" title="Modifier la quantit√©">‚úèÔ∏è √âditer</button>
                        <button class="water-btn reset-btn" id="resetWaterBtn" title="R√©initialiser">üîÑ</button>
                    </div>
                </div>

                <!-- Compteur de pas -->
                <div class="wellness-card steps-card">
                    <div class="wellness-header">
                        <h3>üëü Pas</h3>
                        <span class="wellness-target">Objectif: <span id="stepsGoal">10000</span> pas</span>
                    </div>
                    <div class="wellness-progress">
                        <div class="progress-bar">
                            <div class="progress-fill steps-fill" id="stepsProgress" style="width: 0%;"></div>
                        </div>
                        <span class="wellness-value" id="stepsValue">0 / 10000 pas</span>
                    </div>
                    <div class="wellness-actions">
                        <input type="number" id="stepsInput" placeholder="Nombre de pas" min="0" step="100" style="flex: 1; padding: 10px; border: 2px solid var(--color-border); border-radius: 8px; font-size: 1em;">
                        <button class="steps-btn update-btn" id="updateStepsBtn">‚úì Mettre √† jour</button>
                        <button class="steps-btn reset-btn" id="resetStepsBtn" title="R√©initialiser">üîÑ</button>
                    </div>
                </div>
            </div>

            <!-- Section Activit√©s Physiques -->
            <div class="activities-section">
                <div class="activities-header">
                    <h3>üèÉ Activit√©s Physiques</h3>
                    <button class="add-activity-btn" id="addCustomActivityBtn" title="Ajouter une nouvelle activit√©">‚ûï Nouvelle activit√©</button>
                </div>

                <!-- Formulaire d'ajout d'activit√© -->
                <div class="activity-form">
                    <select id="activitySelect" class="activity-select">
                        <option value="">S√©lectionner une activit√©...</option>
                    </select>
                    <input type="number" id="activityDuration" placeholder="Dur√©e (min)" min="1" class="activity-input">
                    <input type="number" id="activityCalories" placeholder="Calories br√ªl√©es" min="0" class="activity-input">
                    <button class="activity-btn add-btn" id="addActivityBtn">‚ûï Ajouter</button>
                </div>

                <!-- Liste des activit√©s du jour -->
                <div class="activities-list" id="activitiesList">
                    <p class="no-activities">Aucune activit√© enregistr√©e aujourd'hui</p>
                </div>

                <!-- R√©sum√© des activit√©s -->
                <div class="activities-summary" id="activitiesSummary" style="display: none;">
                    <div class="summary-item">
                        <span class="summary-label">‚è±Ô∏è Temps total :</span>
                        <span class="summary-value" id="totalDuration">0 min</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">üî• Calories br√ªl√©es :</span>
                        <span class="summary-value" id="totalActivityCalories">0 kcal</span>
                    </div>
                </div>
            </div>

            <!-- R√©sum√© Quotidien -->
            <div class="daily-summary-card">
                <div class="daily-summary-header">
                    <h3>üìã R√©sum√© de la Journ√©e</h3>
                    <div class="summary-actions">
                        <button class="toggle-summary-btn" id="toggleSummaryBtn" title="Afficher/Masquer le r√©sum√©">
                            <span class="toggle-icon">‚ñº</span>
                        </button>
                        <button class="copy-btn" id="copySummaryBtn" title="Copier le r√©sum√©">
                            <span class="copy-icon">üìã</span>
                            <span class="copy-text">Copier</span>
                        </button>
                    </div>
                </div>
                <div class="daily-summary-content collapsed" id="dailySummaryContent">
                    <p style="text-align: center; color: #999; padding: 20px;">Aucun aliment ajout√© pour aujourd'hui</p>
                </div>
            </div>

            <!-- Liste des aliments disponibles (pour le glisser-d√©poser) -->
            <div class="foods-section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 class="section-title" style="margin-bottom: 0;">ü•ó Aliments Disponibles</h2>
                    <div class="search-container">
                        <input type="text" id="foodSearch" placeholder="üîç Rechercher un aliment..." class="search-input">
                    </div>
                </div>
                <div class="foods-list" id="foodsList"></div>
                <p id="noResultsMessage" style="display: none; text-align: center; color: #999; padding: 20px;">üîç Aucun aliment trouv√©</p>
                <div style="text-align: center; margin-top: 20px;">
                    <button id="loadMoreFoodsBtn" class="load-more-btn" style="display: none;">
                        üìã Voir plus d'aliments (<span id="remainingFoodsCount">0</span> restants)
                    </button>
                </div>
            </div>

            <h2 class="section-title">üìÖ Mes Repas</h2>
            <!-- Grille des repas de la journ√©e -->
            <div class="meals-grid">
                <div class="meal-column" data-meal="petit-dej">
                    <div class="meal-title">üåÖ Petit D√©jeuner</div>
                    <div class="meal-summary" id="summary-petit-dej"></div>
                    <div class="meal-items" id="petit-dej"></div>
                </div>
                <div class="meal-column" data-meal="dejeuner">
                    <div class="meal-title">‚òÄÔ∏è D√©jeuner</div>
                    <div class="meal-summary" id="summary-dejeuner"></div>
                    <div class="meal-items" id="dejeuner"></div>
                </div>
                <div class="meal-column" data-meal="diner">
                    <div class="meal-title">üåô D√Æner</div>
                    <div class="meal-summary" id="summary-diner"></div>
                    <div class="meal-items" id="diner"></div>
                </div>
                <div class="meal-column" data-meal="snack">
                    <div class="meal-title">üçé Snack</div>
                    <div class="meal-summary" id="summary-snack"></div>
                    <div class="meal-items" id="snack"></div>
                </div>
            </div>
        </div>

        <!-- =================== CONTENU DE L'ONGLET "STATISTIQUES" =================== -->
        <div id="stats-tab" class="tab-content">
            <h2 class="section-title">üìä Statistiques Nutritionnelles</h2>
            <!-- Boutons pour choisir la p√©riode d'affichage -->
            <div class="stats-period">
                <button class="period-btn active" data-period="7">7 jours</button>
                <button class="period-btn" data-period="14">14 jours</button>
                <button class="period-btn" data-period="30">30 jours</button>
            </div>
            <!-- Grille pour les graphiques -->
            <div class="stats-grid">
                <div class="chart-container">
                    <h3>√âvolution des Calories</h3><canvas id="caloriesChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>R√©partition des Macronutriments</h3><canvas id="macrosChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>√âvolution des Prot√©ines</h3><canvas id="proteinsChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>√âvolution des Glucides</h3><canvas id="carbsChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>√âvolution des Lipides</h3><canvas id="lipidsChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>√âvolution des Sucres</h3><canvas id="sugarsChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>üåæ √âvolution des Fibres</h3><canvas id="fibersChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>√âvolution du Poids</h3><canvas id="weightChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>üíß Hydratation Quotidienne</h3><canvas id="waterChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>üëü Nombre de Pas</h3><canvas id="stepsChart"></canvas>
                </div>
            </div>

            <!-- Section Moyennes -->
            <h2 class="section-title" style="margin-top: 50px;">üìà Moyennes Hebdomadaires & Mensuelles</h2>
            <div class="stats-period">
                <button class="average-period-btn active" data-avg-period="week">Par Semaine</button>
                <button class="average-period-btn" data-avg-period="month">Par Mois</button>
            </div>
            <div class="stats-grid">
                <div class="chart-container">
                    <h3>üìä Moyenne des Calories</h3><canvas id="avgCaloriesChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ü•© Moyenne des Prot√©ines</h3><canvas id="avgProteinsChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>üçö Moyenne des Glucides</h3><canvas id="avgCarbsChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ü•ë Moyenne des Lipides</h3><canvas id="avgFatsChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>üåæ Moyenne des Fibres</h3><canvas id="avgFibersChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>‚öñÔ∏è Moyenne du Poids</h3><canvas id="avgWeightChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>üíß Moyenne Hydratation</h3><canvas id="avgWaterChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>üëü Moyenne des Pas</h3><canvas id="avgStepsChart"></canvas>
                </div>
            </div>

            <!-- Section Analyse des Co√ªts -->
            <h2 class="section-title" style="margin-top: 50px;">üí∞ Analyse des Co√ªts</h2>
            <div class="stats-period">
                <button class="cost-period-btn active" data-cost-period="7">7 jours</button>
                <button class="cost-period-btn" data-cost-period="14">14 jours</button>
                <button class="cost-period-btn" data-cost-period="30">30 jours</button>
            </div>
            
            <!-- Cartes de synth√®se des co√ªts -->
            <div class="cost-summary-cards">
                <div class="cost-card">
                    <h4>üí≥ Co√ªt Total</h4>
                    <p class="cost-value" id="totalCost">0.00 ‚Ç¨</p>
                    <small id="totalCostPeriod">7 derniers jours</small>
                </div>
                <div class="cost-card">
                    <h4>üìä Co√ªt Moyen/Jour</h4>
                    <p class="cost-value" id="avgDailyCost">0.00 ‚Ç¨</p>
                    <small id="avgCostPeriod">7 derniers jours</small>
                </div>
                <div class="cost-card">
                    <h4>üìÖ Co√ªt Mensuel Estim√©</h4>
                    <p class="cost-value" id="monthlyCost">0.00 ‚Ç¨</p>
                    <small>Bas√© sur la moyenne actuelle</small>
                </div>
            </div>

            <!-- Graphiques des co√ªts -->
            <div class="stats-grid">
                <div class="chart-container">
                    <h3>üí∞ √âvolution des Co√ªts Quotidiens</h3><canvas id="dailyCostsChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>üçΩÔ∏è R√©partition des Co√ªts par Repas</h3><canvas id="costsByMealChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>üèÜ Top 5 Aliments les Plus Chers</h3><canvas id="topCostsChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>üìà Comparaison Hebdo/Mensuelle</h3><canvas id="costComparisonChart"></canvas>
                </div>
            </div>

            <!-- Section Activit√©s Physiques -->
            <h2 class="section-title" style="margin-top: 50px;">üèÉ Activit√©s Physiques</h2>
            <div class="stats-period">
                <button class="activity-period-btn active" data-activity-period="7">7 jours</button>
                <button class="activity-period-btn" data-activity-period="14">14 jours</button>
                <button class="activity-period-btn" data-activity-period="30">30 jours</button>
            </div>

            <!-- Graphiques des activit√©s -->
            <div class="stats-grid">
                <div class="chart-container">
                    <h3>üî• Calories Br√ªl√©es Quotidiennes</h3><canvas id="activityCaloriesChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>‚è±Ô∏è Temps d'Activit√© Total</h3><canvas id="activityTimeChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>üìä R√©partition par Type d'Activit√©</h3><canvas id="activityTypeDistChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>üèÜ Top 5 Activit√©s les Plus Pratiqu√©es</h3><canvas id="topActivitiesChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>üî• Calories par Type d'Activit√©</h3><canvas id="caloriesByTypeChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>üìà Comparaison Hebdo/Mensuelle</h3><canvas id="activityComparisonChart"></canvas>
                </div>
            </div>

            <!-- Section Analyse par Aliment -->
            <h2 class="section-title" style="margin-top: 50px;">üìä Analyse par Aliment</h2>
            <div class="stats-period">
                <button class="food-analysis-period-btn active" data-food-period="7">7 jours</button>
                <button class="food-analysis-period-btn" data-food-period="30">30 jours</button>
                <button class="food-analysis-period-btn" data-food-period="365">365 jours</button>
            </div>

            <!-- Cartes de synth√®se -->
            <div class="cost-summary-cards" style="margin-bottom: 30px;">
                <div class="cost-card">
                    <div class="cost-icon">üì¶</div>
                    <div class="cost-content">
                        <div class="cost-label">Aliments Diff√©rents</div>
                        <div class="cost-value" id="foodAnalysisTotalFoods">0</div>
                        <div class="cost-period" id="foodAnalysisFoodsPeriod">7 derniers jours</div>
                    </div>
                </div>
                <div class="cost-card">
                    <div class="cost-icon">‚öñÔ∏è</div>
                    <div class="cost-content">
                        <div class="cost-label">Poids Total</div>
                        <div class="cost-value" id="foodAnalysisTotalWeight">0 kg</div>
                        <div class="cost-period" id="foodAnalysisWeightPeriod">7 derniers jours</div>
                    </div>
                </div>
                <div class="cost-card">
                    <div class="cost-icon">üí∞</div>
                    <div class="cost-content">
                        <div class="cost-label">Co√ªt Total</div>
                        <div class="cost-value" id="foodAnalysisTotalCost">0 ‚Ç¨</div>
                        <div class="cost-period" id="foodAnalysisCostPeriod">7 derniers jours</div>
                    </div>
                </div>
            </div>

            <!-- Tableau d√©taill√© -->
            <div class="food-analysis-table-container">
                <div class="food-analysis-table-header">
                    <h3>üìã D√©tail par Aliment</h3>
                    <div class="food-analysis-export-buttons">
                        <button class="export-btn" id="copyFoodAnalysisBtn" title="Copier dans le presse-papier">üìã Copier</button>
                        <button class="export-btn" id="exportFoodAnalysisCSVBtn" title="Exporter en CSV">üì• Export CSV</button>
                    </div>
                </div>
                
                <!-- S√©lecteur de colonnes -->
                <div class="food-analysis-columns-selector">
                    <span style="font-weight: 600; color: #667eea; margin-right: 15px;">üìä Afficher :</span>
                    <label class="column-checkbox">
                        <input type="checkbox" class="column-toggle" data-column="proteins" checked>
                        <span>ü•© Prot√©ines</span>
                    </label>
                    <label class="column-checkbox">
                        <input type="checkbox" class="column-toggle" data-column="carbs" checked>
                        <span>üçû Glucides</span>
                    </label>
                    <label class="column-checkbox">
                        <input type="checkbox" class="column-toggle" data-column="fats" checked>
                        <span>üßà Lipides</span>
                    </label>
                    <label class="column-checkbox">
                        <input type="checkbox" class="column-toggle" data-column="fibers">
                        <span>üåæ Fibres</span>
                    </label>
                    <label class="column-checkbox">
                        <input type="checkbox" class="column-toggle" data-column="sugars">
                        <span>üç¨ Sucres</span>
                    </label>
                    <label class="column-checkbox">
                        <input type="checkbox" class="column-toggle" data-column="proteinsPer100g" checked>
                        <span>üí™ Prot/100g</span>
                    </label>
                    <label class="column-checkbox">
                        <input type="checkbox" class="column-toggle" data-column="proteinPrice" checked>
                        <span>üí∞ Prix/100g prot</span>
                    </label>
                </div>
                <div class="food-analysis-table-wrapper">
                    <table class="food-analysis-table" id="foodAnalysisTable">
                        <thead>
                            <tr>
                                <th class="sortable" data-sort="name">Aliment <span class="sort-icon">‚¨ç</span></th>
                                <th class="sortable" data-sort="weight">Poids Total <span class="sort-icon">‚¨ç</span></th>
                                <th class="sortable" data-sort="cost">Prix Total <span class="sort-icon">‚¨ç</span></th>
                                <th class="sortable macro-column" data-sort="proteins" data-column="proteins">Prot√©ines <span class="sort-icon">‚¨ç</span></th>
                                <th class="sortable macro-column" data-sort="carbs" data-column="carbs">Glucides <span class="sort-icon">‚¨ç</span></th>
                                <th class="sortable macro-column" data-sort="fats" data-column="fats">Lipides <span class="sort-icon">‚¨ç</span></th>
                                <th class="sortable macro-column" data-sort="fibers" data-column="fibers" style="display: none;">Fibres <span class="sort-icon">‚¨ç</span></th>
                                <th class="sortable macro-column" data-sort="sugars" data-column="sugars" style="display: none;">Sucres <span class="sort-icon">‚¨ç</span></th>
                                <th class="sortable macro-column" data-sort="proteinsPer100g" data-column="proteinsPer100g">Prot/100g <span class="sort-icon">‚¨ç</span></th>
                                <th class="sortable macro-column" data-sort="proteinPrice" data-column="proteinPrice">Prix/100g prot <span class="sort-icon">‚¨ç</span></th>
                            </tr>
                        </thead>
                        <tbody id="foodAnalysisTableBody">
                            <tr>
                                <td colspan="10" style="text-align: center; padding: 40px; color: #999;">
                                    Aucune donn√©e disponible
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Graphiques Top 10 -->
            <div class="stats-grid" style="margin-top: 30px;">
                <div class="chart-container">
                    <h3>‚öñÔ∏è Top 10 - Poids Consomm√©</h3>
                    <canvas id="foodAnalysisWeightChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>üí∞ Top 10 - Co√ªt Total</h3>
                    <canvas id="foodAnalysisCostChart"></canvas>
                </div>
            </div>
            <!-- ===================================== -->
        </div>
    </div>

    <!-- =================== CONTENU DE L'ONGLET "OBJECTIFS" =================== -->
    <div id="goals-tab" class="tab-content">
        <h2 class="section-title">üî• Calculateur de S√®che</h2>
        <p style="text-align: center; color: #666; margin-bottom: 30px; font-size: 1.1em;">D√©terminez votre apport calorique optimal pour perdre du gras</p>
        
        <div class="add-food-section">
            <form class="add-food-form" id="goalsForm">
                <div class="form-group" style="grid-column: 1 / -1;">
                    <label style="margin-bottom: 15px; font-size: 1em; font-weight: 600; color: var(--color-text-dark);">Sexe</label>
                    <div class="gender-selector">
                        <div class="gender-option">
                            <input type="radio" id="homme" name="sexe" value="homme" checked>
                            <label for="homme" class="gender-label">
                                <span class="emoji">üë®</span>
                                <span>Homme</span>
                            </label>
                        </div>
                        <div class="gender-option">
                            <input type="radio" id="femme" name="sexe" value="femme">
                            <label for="femme" class="gender-label">
                                <span class="emoji">üë©</span>
                                <span>Femme</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="age">üéÇ √Çge (ann√©es)</label>
                    <input type="number" id="age" min="15" max="100" placeholder="30" required>
                </div>

                <div class="form-group">
                    <label for="goalWeight">‚öñÔ∏è Poids (kg)</label>
                    <input type="number" id="goalWeight" min="30" max="300" step="0.1" placeholder="80" required>
                </div>

                <div class="form-group">
                    <label for="taille">üìè Taille (cm)</label>
                    <input type="number" id="taille" min="100" max="250" placeholder="175" required>
                </div>

                <div class="form-group">
                    <label for="activite">üèãÔ∏è Niveau d'activit√© physique</label>
                    <select id="activite" required>
                        <option value="1.2">S√©dentaire (peu ou pas d'exercice)</option>
                        <option value="1.375">L√©g√®rement actif (1-3 jours/semaine)</option>
                        <option value="1.55">Mod√©r√©ment actif (3-5 jours/semaine)</option>
                        <option value="1.725">Tr√®s actif (6-7 jours/semaine)</option>
                        <option value="1.9">Extr√™mement actif (2x par jour, travail physique)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="deficit">üî• D√©ficit calorique souhait√©</label>
                    <select id="deficit" required>
                        <option value="0.10">L√©ger - 10% (perte lente, pr√©serve muscle)</option>
                        <option value="0.15">Mod√©r√© - 15% (√©quilibr√©)</option>
                        <option value="0.20">Standard - 20% (perte efficace)</option>
                        <option value="0.25">Agressif - 25% (perte rapide)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="waterGoalInput">üíß Objectif d'hydratation quotidien (ml)</label>
                    <input type="number" id="waterGoalInput" min="500" max="10000" step="100" value="2000" placeholder="2000">
                    <small style="color: #999; font-size: 0.85em; margin-top: 5px; display: block;">Recommand√© : 2000-3000 ml par jour</small>
                </div>

                <div class="form-group">
                    <label for="stepsGoalInput">üëü Objectif de pas quotidien</label>
                    <input type="number" id="stepsGoalInput" min="1000" max="50000" step="1000" value="10000" placeholder="10000">
                    <small style="color: #999; font-size: 0.85em; margin-top: 5px; display: block;">Recommand√© : 10000 pas par jour</small>
                </div>

                <div class="form-group">
                    <label for="sugarsMaxInput">üç¨ Seuil maximum de sucres (g/jour)</label>
                    <input type="number" id="sugarsMaxInput" min="0" max="200" step="1" value="25" placeholder="25">
                    <small style="color: #999; font-size: 0.85em; margin-top: 5px; display: block;">Limite haute : 50g | Id√©al : 25g par jour</small>
                </div>

                <div class="form-group">
                    <label for="fibersMinInput">üåæ Seuil minimum de fibres (g/jour)</label>
                    <input type="number" id="fibersMinInput" min="0" max="100" step="1" value="25" placeholder="25">
                    <small style="color: #999; font-size: 0.85em; margin-top: 5px; display: block;">Recommand√© : minimum 25g par jour</small>
                </div>

                <button type="submit" class="add-btn">Calculer et Sauvegarder</button>
            </form>
        </div>

        <!-- Section des r√©sultats -->
        <div id="goalsResults" style="margin-top: 40px; display: none;">
            <h2 class="section-title">üìä Vos R√©sultats</h2>
            
            <div class="result-card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <span style="font-weight: 600; color: #555;">üí™ M√©tabolisme de Base (MB)</span>
                    <span style="font-size: 1.4em; font-weight: 700; color: #667eea;" id="goalMB">0 kcal</span>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span style="font-weight: 600; color: #555;">‚ö° D√©pense √ânerg√©tique Totale (DET)</span>
                    <span style="font-size: 1.4em; font-weight: 700; color: #667eea;" id="goalDET">0 kcal</span>
                </div>
            </div>

            <div class="result-card-highlight">
                <div style="display: flex; justify-content: space-between; align-items: center; position: relative; z-index: 1;">
                    <span style="font-weight: 600; color: white; font-size: 1.2em;">üéØ Calories pour la S√®che</span>
                    <span style="font-size: 1.8em; font-weight: 700; color: white;" id="goalCalories">0 kcal</span>
                </div>
            </div>

            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3 style="margin: 0; color: #333; font-size: 1.3em;">üìä R√©partition des Macronutriments</h3>
                <button class="edit-macros-btn" id="editMacrosBtn" style="padding: 8px 16px; background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 0.9em; display: none;">
                    ‚úèÔ∏è Modifier
                </button>
            </div>
            <div class="summary">
                <div class="summary-item">
                    <h3>ü•© Prot√©ines</h3>
                    <p id="goalProteins" class="macro-display">0 g</p>
                    <input type="number" id="goalProteinsInput" class="macro-input" min="0" step="1" style="display: none; width: 100%; padding: 10px; border: 2px solid #667eea; border-radius: 8px; font-size: 1.2em; font-weight: 700; text-align: center;">
                </div>
                <div class="summary-item">
                    <h3>ü•ë Lipides</h3>
                    <p id="goalFats" class="macro-display">0 g</p>
                    <input type="number" id="goalFatsInput" class="macro-input" min="0" step="1" style="display: none; width: 100%; padding: 10px; border: 2px solid #667eea; border-radius: 8px; font-size: 1.2em; font-weight: 700; text-align: center;">
                </div>
                <div class="summary-item">
                    <h3>üçö Glucides</h3>
                    <p id="goalCarbs" class="macro-display">0 g</p>
                    <input type="number" id="goalCarbsInput" class="macro-input" min="0" step="1" style="display: none; width: 100%; padding: 10px; border: 2px solid #667eea; border-radius: 8px; font-size: 1.2em; font-weight: 700; text-align: center;">
                </div>
            </div>
            <div id="macroEditActions" style="display: none; text-align: center; margin-top: 20px; gap: 10px;">
                <button class="add-btn" id="saveMacrosBtn" style="margin-right: 10px;">üíæ Sauvegarder</button>
                <button class="cancel-btn" id="cancelMacrosBtn" style="background: #ef4444; color: white; padding: 12px 24px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">‚ùå Annuler</button>
            </div>

            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 30px; margin-bottom: 20px;">
                <h3 style="margin: 0; color: #333; font-size: 1.3em;">üéØ Objectifs Bien-√ätre</h3>
                <button class="edit-macros-btn" id="editWellnessBtn" style="padding: 8px 16px; background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 0.9em; display: none;">
                    ‚úèÔ∏è Modifier
                </button>
            </div>
            <div class="summary">
                <div class="summary-item">
                    <h3>üíß Hydratation</h3>
                    <p id="goalWaterDisplay" class="wellness-display">2000 ml</p>
                    <input type="number" id="goalWaterEditInput" class="wellness-input" min="500" max="10000" step="100" style="display: none; width: 100%; padding: 10px; border: 2px solid #06b6d4; border-radius: 8px; font-size: 1.2em; font-weight: 700; text-align: center;">
                </div>
                <div class="summary-item">
                    <h3>üëü Pas</h3>
                    <p id="goalStepsDisplay" class="wellness-display">10000 pas</p>
                    <input type="number" id="goalStepsEditInput" class="wellness-input" min="1000" max="50000" step="1000" style="display: none; width: 100%; padding: 10px; border: 2px solid #06b6d4; border-radius: 8px; font-size: 1.2em; font-weight: 700; text-align: center;">
                </div>
            </div>
            <div id="wellnessEditActions" style="display: none; text-align: center; margin-top: 20px; gap: 10px;">
                <button class="add-btn" id="saveWellnessBtn" style="margin-right: 10px;">üíæ Sauvegarder</button>
                <button class="cancel-btn" id="cancelWellnessBtn" style="background: #ef4444; color: white; padding: 12px 24px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">‚ùå Annuler</button>
            </div>

            <div class="goals-info-box">
                <h4>üí° Conseils pour votre s√®che</h4>
                <p>
                    ‚Ä¢ Pesez-vous 1 fois par semaine dans les m√™mes conditions<br>
                    ‚Ä¢ Visez une perte de 0.5-1% de votre poids par semaine<br>
                    ‚Ä¢ Ajustez vos calories si la perte stagne pendant 2 semaines<br>
                    ‚Ä¢ Maintenez un apport √©lev√© en prot√©ines pour pr√©server la masse musculaire<br>
                    ‚Ä¢ Hydratez-vous abondamment (3-4L d'eau par jour)
                </p>
            </div>
        </div>
    </div>

    <!-- =================== CONTENU DE L'ONGLET "ALIMENTS" =================== -->
    <div id="foods-tab" class="tab-content">
        <!-- Section pour ajouter un nouvel aliment -->
        <div class="add-food-section">
            <h2 class="section-title">‚ûï Ajouter un Aliment</h2>
            <form class="add-food-form" id="addFoodForm">
                <div class="form-group"><label>Nom</label><input type="text" id="foodName" required></div>
                <div class="form-group"><label>Calories (kcal/100g)</label><input type="number" step="0.1"
                        id="foodCalories" required></div>
                <div class="form-group"><label>Prot√©ines (g/100g)</label><input type="number" step="0.1"
                        id="foodProteins" required></div>
                <div class="form-group"><label>Glucides (g/100g)</label><input type="number" step="0.1" id="foodCarbs"
                        required></div>
                <div class="form-group"><label>Sucres (g/100g)</label><input type="number" step="0.1" id="foodSugars"
                        required></div>
                <div class="form-group"><label>Fibres (g/100g)</label><input type="number" step="0.1" id="foodFibers"
                        required></div>
                <div class="form-group"><label>Lipides (g/100g)</label><input type="number" step="0.1" id="foodFats"
                        required></div>
                <div class="form-group">
                    <label>üí∞ Prix (‚Ç¨)</label>
                    <input type="number" step="0.01" id="foodPrice" placeholder="Ex: 4.50" min="0">
                    <small style="color: #999; font-size: 0.85em; display: block; margin-top: 5px;">Optionnel - Prix du produit en magasin</small>
                </div>
                <div class="form-group">
                    <label>üì¶ Pour (grammes)</label>
                    <input type="number" step="1" id="foodPriceGrams" placeholder="Ex: 500" min="1">
                    <small style="color: #999; font-size: 0.85em; display: block; margin-top: 5px;">Optionnel - Grammage du produit achet√©</small>
                </div>
                <button type="submit" class="add-btn">Ajouter l'Aliment</button>
            </form>
        </div>

        <!-- Section pour voir et g√©rer les aliments existants -->
        <div class="foods-section" style="margin-top: 30px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; gap: 20px; flex-wrap: wrap;">
                <h2 class="section-title" style="margin-bottom: 0;">ü•ó Liste des Aliments</h2>
                <div class="search-container">
                    <input type="text" id="foodSearchManage" placeholder="üîç Rechercher un aliment..." class="search-input">
                </div>
            </div>
            <p style="color: #999; margin-bottom: 15px; font-size: 0.9em;">üí° Cliquez sur un aliment pour le modifier</p>
            <div class="foods-list" id="foodsListManage"></div>
            <p id="noResultsMessageManage" style="display: none; text-align: center; color: #999; padding: 20px;">üîç Aucun aliment trouv√©</p>
        </div>
    </div>

    <!-- =================== CONTENU DE L'ONGLET "PARAM√àTRES" =================== -->
    <div id="settings-tab" class="tab-content">
        <h2 class="section-title">‚öôÔ∏è Param√®tres</h2>
        
        <!-- Section Gestion des Donn√©es -->
        <div class="settings-section">
            <div class="settings-card">
                <div class="settings-card-header">
                    <h3>üíæ Gestion des Donn√©es</h3>
                    <p class="settings-description">Sauvegardez ou importez vos donn√©es pour les conserver en s√©curit√©</p>
                </div>
                <div class="settings-card-body">
                    <div class="settings-actions">
                        <div class="settings-action-item">
                            <div class="action-info">
                                <h4>üì§ Exporter les donn√©es</h4>
                                <p>T√©l√©chargez toutes vos donn√©es en format JSON</p>
                            </div>
                            <button id="export-btn" class="settings-btn export-btn">üíæ Exporter</button>
                        </div>
                        
                        <div class="settings-action-item">
                            <div class="action-info">
                                <h4>üì• Importer les donn√©es</h4>
                                <p>Restaurez vos donn√©es depuis un fichier JSON</p>
                            </div>
                            <button id="import-btn" class="settings-btn import-btn">üìÇ Importer</button>
                            <input type="file" id="fileInput" accept=".json" style="display: none;">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section Zone Dangereuse -->
        <div class="settings-section">
            <div class="settings-card danger-card">
                <div class="settings-card-header">
                    <h3>‚ö†Ô∏è Zone Dangereuse</h3>
                    <p class="settings-description">Actions irr√©versibles - utilisez avec pr√©caution</p>
                </div>
                <div class="settings-card-body">
                    <div class="settings-actions">
                        <div class="settings-action-item">
                            <div class="action-info">
                                <h4>üîÑ R√©initialiser toutes les donn√©es</h4>
                                <p>Supprime d√©finitivement tous les repas, objectifs et aliments personnalis√©s</p>
                            </div>
                            <button id="reset-btn" class="settings-btn reset-btn">üóëÔ∏è R√©initialiser</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section Informations -->
        <div class="settings-section">
            <div class="settings-card info-card">
                <div class="settings-card-header">
                    <h3>‚ÑπÔ∏è Informations</h3>
                </div>
                <div class="settings-card-body">
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">Version</span>
                            <span class="info-value">1.0.0</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Stockage</span>
                            <span class="info-value">IndexedDB</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Framework</span>
                            <span class="info-value">Vanilla JS</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Graphiques</span>
                            <span class="info-value">Chart.js</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <!-- =============================================
         MODALE DE MODIFICATION D'ALIMENT
         (cach√©e par d√©faut avec le CSS)
    ============================================= -->
    <div id="editFoodModal" class="modal">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h3>Modifier l'Aliment</h3>
            <form id="editFoodForm" class="add-food-form">
                <input type="hidden" id="editFoodId">

                <div class="form-group">
                    <label>Nom</label>
                    <input type="text" id="editFoodName" required>
                </div>
                <div class="form-group">
                    <label>Calories (kcal/100g)</label>
                    <input type="number" step="0.1" id="editFoodCalories" required>
                </div>
                <div class="form-group">
                    <label>Prot√©ines (g/100g)</label>
                    <input type="number" step="0.1" id="editFoodProteins" required>
                </div>
                <div class="form-group">
                    <label>Glucides (g/100g)</label>
                    <input type="number" step="0.1" id="editFoodCarbs" required>
                </div>
                <div class="form-group">
                    <label>Sucres (g/100g)</label>
                    <input type="number" step="0.1" id="editFoodSugars" required>
                </div>
                <div class="form-group">
                    <label>Fibres (g/100g)</label>
                    <input type="number" step="0.1" id="editFoodFibers" required>
                </div>
                <div class="form-group">
                    <label>Lipides (g/100g)</label>
                    <input type="number" step="0.1" id="editFoodFats" required>
                </div>
                <div class="form-group">
                    <label>üí∞ Prix (‚Ç¨)</label>
                    <input type="number" step="0.01" id="editFoodPrice" placeholder="Ex: 4.50" min="0">
                    <small style="color: #999; font-size: 0.85em; display: block; margin-top: 5px;">Optionnel - Prix du produit en magasin</small>
                </div>
                <div class="form-group">
                    <label>üì¶ Pour (grammes)</label>
                    <input type="number" step="1" id="editFoodPriceGrams" placeholder="Ex: 500" min="1">
                    <small style="color: #999; font-size: 0.85em; display: block; margin-top: 5px;">Optionnel - Grammage du produit achet√©</small>
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="add-btn">Sauvegarder</button>
                    <button type="button" class="reset-btn" id="cancelEditBtn">Annuler</button>
                </div>
            </form>
        </div>
    </div>

    <!-- =============================================
         MODALE D'AJOUT D'ACTIVIT√â PERSONNALIS√âE
    ============================================= -->
    <div id="customActivityModal" class="modal">
        <div class="modal-content">
            <button class="modal-close-btn" id="closeCustomActivityModal">&times;</button>
            <h3>Nouvelle Activit√© Personnalis√©e</h3>
            <form id="customActivityForm">
                <div class="form-group">
                    <label>Nom de l'activit√©</label>
                    <input type="text" id="customActivityName" placeholder="Ex: Boxe, Danse, etc." required>
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="add-btn">Ajouter</button>
                    <button type="button" class="reset-btn" id="cancelCustomActivityBtn">Annuler</button>
                </div>
            </form>
        </div>
    </div>

    <!-- =============================================
         MODALE DE MODIFICATION D'ACTIVIT√â
    ============================================= -->
    <div id="editActivityModal" class="modal">
        <div class="modal-content">
            <button class="modal-close-btn" id="closeEditActivityModal">&times;</button>
            <h3>Modifier l'Activit√©</h3>
            <form id="editActivityForm">
                <input type="hidden" id="editActivityIndex">
                <div class="form-group">
                    <label>Activit√©</label>
                    <select id="editActivityType" class="activity-select">
                        <option value="">S√©lectionner...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Dur√©e (minutes)</label>
                    <input type="number" id="editActivityDuration" min="1" required>
                </div>
                <div class="form-group">
                    <label>Calories br√ªl√©es</label>
                    <input type="number" id="editActivityCalories" min="0" required>
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="add-btn">Sauvegarder</button>
                    <button type="button" class="reset-btn" id="cancelEditActivityBtn">Annuler</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Le script principal de l'application, charg√© √† la fin -->
    <script src="js/app.js" type="module"></script>
</body>

</html>