<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tracker Nutritionnel</title>
    <!-- Librairie externe pour les graphiques -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Liaison vers le fichier de styles CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="container">
        <h1>ğŸ½ï¸ Tracker Nutritionnel</h1>

        <!-- =================== NAVIGATION PAR ONGLETS =================== -->
        <div class="nav-tabs">
            <button class="nav-tab active" data-tab="tracker">ğŸ“… Suivi Quotidien</button>
            <button class="nav-tab" data-tab="stats">ğŸ“Š Statistiques</button>
            <button class="nav-tab" data-tab="goals">ğŸ¯ Objectifs</button>
            <button class="nav-tab" data-tab="foods">ğŸ¥— Aliments</button>
            <button class="nav-tab" data-tab="meals">ğŸ½ï¸ Repas</button>
            <button class="nav-tab" data-tab="comparison">âš–ï¸ Comparaison</button>
            <button class="nav-tab" data-tab="settings">âš™ï¸ ParamÃ¨tres</button>
        </div>

        <!-- =================== CONTENU DE L'ONGLET "SUIVI QUOTIDIEN" =================== -->
        <div id="tracker-tab" class="tab-content active">
            <!-- En-tÃªte du calendrier -->
            <div class="calendar-header">
                <button id="prev-day-btn">â† Jour PrÃ©cÃ©dent</button>
                <div class="date-display-section">
                    <h2 id="currentDate"></h2>
                    <input type="date" id="datePicker" class="date-picker" title="SÃ©lectionner une date">
                </div>
                <div>
                    <button id="today-btn" class="today-btn">Aujourd'hui</button>
                    <button id="next-day-btn">Jour Suivant â†’</button>
                </div>
            </div>

            <!-- RÃ©sumÃ© nutritionnel de la journÃ©e avec barres de progression -->
            <div class="summary-modern" id="summary">
                <div class="progress-card">
                    <div class="progress-header">
                        <span class="progress-label">ğŸ”¥ Calories</span>
                        <span class="progress-values" id="totalCalories">0 / 0 kcal</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="caloriesProgress" style="width: 0%;"></div>
                    </div>
                </div>
                <div class="progress-card">
                    <div class="progress-header">
                        <span class="progress-label">ğŸ¥© ProtÃ©ines</span>
                        <span class="progress-values" id="totalProteins">0 / 0 g</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="proteinsProgress" style="width: 0%;"></div>
                    </div>
                </div>
                <div class="progress-card">
                    <div class="progress-header">
                        <span class="progress-label">ğŸ Glucides</span>
                        <span class="progress-values" id="totalCarbs">0 / 0 g</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="carbsProgress" style="width: 0%;"></div>
                    </div>
                </div>
                <div class="progress-card">
                    <div class="progress-header">
                        <span class="progress-label">ğŸ¥‘ Lipides</span>
                        <span class="progress-values" id="totalFats">0 / 0 g</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="fatsProgress" style="width: 0%;"></div>
                    </div>
                </div>
                <div class="progress-card">
                    <div class="progress-header">
                        <span class="progress-label">ğŸ¬ Sucres</span>
                        <span class="progress-values" id="totalSugars">0 g</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill secondary" id="sugarsProgress" style="width: 0%;"></div>
                    </div>
                </div>
                <div class="progress-card">
                    <div class="progress-header">
                        <span class="progress-label">ğŸŒ¾ Fibres</span>
                        <span class="progress-values" id="totalFibers">0 g</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="fibersProgress" style="width: 0%; background: linear-gradient(135deg, #84cc16 0%, #65a30d 100%);"></div>
                    </div>
                </div>
                <div class="progress-card weight-card">
                    <div class="progress-header">
                        <span class="progress-label">âš–ï¸ Poids</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 8px; margin-top: 8px;">
                        <input type="number" id="weightInput" step="0.1" placeholder="kg" style="flex: 1; padding: 8px; border: 2px solid var(--color-border); border-radius: 8px; font-size: 1em;">
                        <button id="saveWeightBtn" class="quick-action-btn">ğŸ’¾</button>
                    </div>
                </div>
            </div>

            <!-- Section Hydratation et ActivitÃ© -->
            <div class="wellness-section">
                <!-- Hydratation -->
                <div class="wellness-card water-card">
                    <div class="wellness-header">
                        <h3>ğŸ’§ Hydratation</h3>
                        <span class="wellness-target">Objectif: <span id="waterGoal">2000</span> ml</span>
                    </div>
                    <div class="wellness-progress">
                        <div class="progress-bar">
                            <div class="progress-fill water-fill" id="waterProgress" style="width: 0%;"></div>
                        </div>
                        <span class="wellness-value" id="waterValue">0 ml / 2000 ml</span>
                    </div>
                    <div class="wellness-actions">
                        <button class="water-btn add-btn" data-amount="300">+300ml</button>
                        <button class="water-btn add-btn" data-amount="500">+500ml</button>
                        <button class="water-btn add-btn" data-amount="1000">+1L</button>
                        <button class="water-btn edit-btn" id="editWaterBtn" title="Modifier la quantitÃ©">âœï¸ Ã‰diter</button>
                        <button class="water-btn reset-btn" id="resetWaterBtn" title="RÃ©initialiser">ğŸ”„</button>
                    </div>
                </div>

                <!-- Compteur de pas -->
                <div class="wellness-card steps-card">
                    <div class="wellness-header">
                        <h3>ğŸ‘Ÿ Pas</h3>
                        <span class="wellness-target">Objectif: <span id="stepsGoal">10000</span> pas</span>
                    </div>
                    <div class="wellness-progress">
                        <div class="progress-bar">
                            <div class="progress-fill steps-fill" id="stepsProgress" style="width: 0%;"></div>
                        </div>
                        <span class="wellness-value" id="stepsValue">0 / 10000 pas</span>
                    </div>
                    <div class="wellness-actions">
                        <input type="number" id="stepsInput" placeholder="Nombre de pas" min="0" step="100" style="flex: 1; padding: 10px; border: 2px solid var(--color-border); border-radius: 8px; font-size: 1em;">
                        <button class="steps-btn update-btn" id="updateStepsBtn">âœ“ Mettre Ã  jour</button>
                        <button class="steps-btn reset-btn" id="resetStepsBtn" title="RÃ©initialiser">ğŸ”„</button>
                    </div>
                </div>
            </div>

            <!-- Section ActivitÃ©s Physiques -->
            <div class="activities-section">
                <div class="activities-header">
                    <h3>ğŸƒ ActivitÃ©s Physiques</h3>
                    <button class="add-activity-btn" id="addCustomActivityBtn" title="Ajouter une nouvelle activitÃ©">â• Nouvelle activitÃ©</button>
                </div>

                <!-- Formulaire d'ajout d'activitÃ© -->
                <div class="activity-form">
                    <select id="activitySelect" class="activity-select">
                        <option value="">SÃ©lectionner une activitÃ©...</option>
                    </select>
                    <input type="number" id="activityDuration" placeholder="DurÃ©e (min)" min="1" class="activity-input">
                    <input type="number" id="activityCalories" placeholder="Calories brÃ»lÃ©es" min="0" class="activity-input">
                    <button class="activity-btn add-btn" id="addActivityBtn">â• Ajouter</button>
                </div>

                <!-- Liste des activitÃ©s du jour -->
                <div class="activities-list" id="activitiesList">
                    <p class="no-activities">Aucune activitÃ© enregistrÃ©e aujourd'hui</p>
                </div>

                <!-- RÃ©sumÃ© des activitÃ©s -->
                <div class="activities-summary" id="activitiesSummary" style="display: none;">
                    <div class="summary-item">
                        <span class="summary-label">â±ï¸ Temps total :</span>
                        <span class="summary-value" id="totalDuration">0 min</span>
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">ğŸ”¥ Calories brÃ»lÃ©es :</span>
                        <span class="summary-value" id="totalActivityCalories">0 kcal</span>
                    </div>
                </div>
            </div>

            <!-- RÃ©sumÃ© Quotidien -->
            <div class="daily-summary-card">
                <div class="daily-summary-header">
                    <h3>ğŸ“‹ RÃ©sumÃ© de la JournÃ©e</h3>
                    <div class="summary-actions">
                        <button class="toggle-summary-btn" id="toggleSummaryBtn" title="Afficher/Masquer le rÃ©sumÃ©">
                            <span class="toggle-icon">â–¼</span>
                        </button>
                        <button class="copy-btn" id="copySummaryBtn" title="Copier le rÃ©sumÃ©">
                            <span class="copy-icon">ğŸ“‹</span>
                            <span class="copy-text">Copier</span>
                        </button>
                    </div>
                </div>
                <div class="daily-summary-content collapsed" id="dailySummaryContent">
                    <p style="text-align: center; color: #999; padding: 20px;">Aucun aliment ajoutÃ© pour aujourd'hui</p>
                </div>
            </div>

            <!-- Liste des aliments disponibles (pour le glisser-dÃ©poser) -->
            <div class="foods-section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2 class="section-title" style="margin-bottom: 0;">ğŸ¥— Aliments Disponibles</h2>
                    <div class="search-container">
                        <input type="text" id="foodSearch" placeholder="ğŸ” Rechercher un aliment..." class="search-input">
                    </div>
                </div>
                <div class="foods-list" id="foodsList"></div>
                <p id="noResultsMessage" style="display: none; text-align: center; color: #999; padding: 20px;">ğŸ” Aucun aliment trouvÃ©</p>
                <div style="text-align: center; margin-top: 20px;">
                    <button id="loadMoreFoodsBtn" class="load-more-btn" style="display: none;">
                        ğŸ“‹ Voir plus d'aliments (<span id="remainingFoodsCount">0</span> restants)
                    </button>
                </div>
            </div>

            <h2 class="section-title">ğŸ“… Mes Repas</h2>
            <!-- Grille des repas de la journÃ©e -->
            <div class="meals-grid">
                <div class="meal-column" data-meal="petit-dej">
                    <div class="meal-title">ğŸŒ… Petit DÃ©jeuner</div>
                    <div class="meal-summary" id="summary-petit-dej"></div>
                    <div class="meal-items" id="petit-dej"></div>
                </div>
                <div class="meal-column" data-meal="dejeuner">
                    <div class="meal-title">â˜€ï¸ DÃ©jeuner</div>
                    <div class="meal-summary" id="summary-dejeuner"></div>
                    <div class="meal-items" id="dejeuner"></div>
                </div>
                <div class="meal-column" data-meal="diner">
                    <div class="meal-title">ğŸŒ™ DÃ®ner</div>
                    <div class="meal-summary" id="summary-diner"></div>
                    <div class="meal-items" id="diner"></div>
                </div>
                <div class="meal-column" data-meal="snack">
                    <div class="meal-title">ğŸ Snack</div>
                    <div class="meal-summary" id="summary-snack"></div>
                    <div class="meal-items" id="snack"></div>
                </div>
            </div>
        </div>

        <!-- =================== CONTENU DE L'ONGLET "STATISTIQUES" =================== -->
        <div id="stats-tab" class="tab-content">
            <h2 class="section-title">ğŸ“Š Statistiques Nutritionnelles</h2>
            <!-- Boutons pour choisir la pÃ©riode d'affichage -->
            <div class="stats-period">
                <button class="period-btn active" data-period="7">7 jours</button>
                <button class="period-btn" data-period="14">14 jours</button>
                <button class="period-btn" data-period="30">30 jours</button>
                <button class="period-btn" data-period="90">3 mois</button>
                <button class="period-btn" data-period="180">6 mois</button>
                <button class="period-btn" data-period="365">1 an</button>
                <button class="period-btn" data-period="all">Tout</button>
            </div>
            <!-- Grille pour les graphiques -->
            <div class="stats-grid">
                <div class="chart-container">
                    <h3>Ã‰volution des Calories</h3><canvas id="caloriesChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>RÃ©partition des Macronutriments</h3><canvas id="macrosChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>Ã‰volution des ProtÃ©ines</h3><canvas id="proteinsChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>Ã‰volution des Glucides</h3><canvas id="carbsChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>Ã‰volution des Lipides</h3><canvas id="lipidsChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>Ã‰volution des Sucres</h3><canvas id="sugarsChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ğŸŒ¾ Ã‰volution des Fibres</h3><canvas id="fibersChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>Ã‰volution du Poids</h3><canvas id="weightChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ğŸ’§ Hydratation Quotidienne</h3><canvas id="waterChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ğŸ‘Ÿ Nombre de Pas</h3><canvas id="stepsChart"></canvas>
                </div>
            </div>

            <!-- Section Moyennes -->
            <h2 class="section-title" style="margin-top: 50px;">ğŸ“ˆ Moyennes Hebdomadaires & Mensuelles</h2>
            <div class="stats-period">
                <button class="average-period-btn active" data-avg-period="week">Par Semaine</button>
                <button class="average-period-btn" data-avg-period="month">Par Mois</button>
            </div>
            <div class="stats-grid">
                <div class="chart-container">
                    <h3>ğŸ“Š Moyenne des Calories</h3><canvas id="avgCaloriesChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ğŸ¥© Moyenne des ProtÃ©ines</h3><canvas id="avgProteinsChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ğŸš Moyenne des Glucides</h3><canvas id="avgCarbsChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ğŸ¥‘ Moyenne des Lipides</h3><canvas id="avgFatsChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ğŸŒ¾ Moyenne des Fibres</h3><canvas id="avgFibersChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>âš–ï¸ Moyenne du Poids</h3><canvas id="avgWeightChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ğŸ’§ Moyenne Hydratation</h3><canvas id="avgWaterChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ğŸ‘Ÿ Moyenne des Pas</h3><canvas id="avgStepsChart"></canvas>
                </div>
            </div>

            <!-- Section Analyse des CoÃ»ts -->
            <h2 class="section-title" style="margin-top: 50px;">ğŸ’° Analyse des CoÃ»ts</h2>
            <div class="stats-period">
                <button class="cost-period-btn active" data-cost-period="7">7 jours</button>
                <button class="cost-period-btn" data-cost-period="14">14 jours</button>
                <button class="cost-period-btn" data-cost-period="30">30 jours</button>
            </div>
            
            <!-- Cartes de synthÃ¨se des coÃ»ts -->
            <div class="cost-summary-cards">
                <div class="cost-card">
                    <h4>ğŸ’³ CoÃ»t Total</h4>
                    <p class="cost-value" id="totalCost">0.00 â‚¬</p>
                    <small id="totalCostPeriod">7 derniers jours</small>
                </div>
                <div class="cost-card">
                    <h4>ğŸ“Š CoÃ»t Moyen/Jour</h4>
                    <p class="cost-value" id="avgDailyCost">0.00 â‚¬</p>
                    <small id="avgCostPeriod">7 derniers jours</small>
                </div>
                <div class="cost-card">
                    <h4>ğŸ“… CoÃ»t Mensuel EstimÃ©</h4>
                    <p class="cost-value" id="monthlyCost">0.00 â‚¬</p>
                    <small>BasÃ© sur la moyenne actuelle</small>
                </div>
            </div>

            <!-- Graphiques des coÃ»ts -->
            <div class="stats-grid">
                <div class="chart-container">
                    <h3>ğŸ’° Ã‰volution des CoÃ»ts Quotidiens</h3><canvas id="dailyCostsChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ğŸ½ï¸ RÃ©partition des CoÃ»ts par Repas</h3><canvas id="costsByMealChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ğŸ† Top 5 Aliments les Plus Chers</h3><canvas id="topCostsChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ğŸ“ˆ Comparaison Hebdo/Mensuelle</h3><canvas id="costComparisonChart"></canvas>
                </div>
            </div>

            <!-- Section ActivitÃ©s Physiques -->
            <h2 class="section-title" style="margin-top: 50px;">ğŸƒ ActivitÃ©s Physiques</h2>
            <div class="stats-period">
                <button class="activity-period-btn active" data-activity-period="7">7 jours</button>
                <button class="activity-period-btn" data-activity-period="14">14 jours</button>
                <button class="activity-period-btn" data-activity-period="30">30 jours</button>
            </div>

            <!-- Graphiques des activitÃ©s -->
            <div class="stats-grid">
                <div class="chart-container">
                    <h3>ğŸ”¥ Calories BrÃ»lÃ©es Quotidiennes</h3><canvas id="activityCaloriesChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>â±ï¸ Temps d'ActivitÃ© Total</h3><canvas id="activityTimeChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ğŸ“Š RÃ©partition par Type d'ActivitÃ©</h3><canvas id="activityTypeDistChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ğŸ† Top 5 ActivitÃ©s les Plus PratiquÃ©es</h3><canvas id="topActivitiesChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ğŸ”¥ Calories par Type d'ActivitÃ©</h3><canvas id="caloriesByTypeChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ğŸ“ˆ Comparaison Hebdo/Mensuelle</h3><canvas id="activityComparisonChart"></canvas>
                </div>
            </div>

            <!-- Section Analyse par Aliment -->
            <h2 class="section-title" style="margin-top: 50px;">ğŸ“Š Analyse par Aliment</h2>
            <div class="stats-period">
                <button class="food-analysis-period-btn active" data-food-period="7">7 jours</button>
                <button class="food-analysis-period-btn" data-food-period="30">30 jours</button>
                <button class="food-analysis-period-btn" data-food-period="365">365 jours</button>
            </div>

            <!-- Cartes de synthÃ¨se -->
            <div class="cost-summary-cards" style="margin-bottom: 30px;">
                <div class="cost-card">
                    <div class="cost-icon">ğŸ“¦</div>
                    <div class="cost-content">
                        <div class="cost-label">Aliments DiffÃ©rents</div>
                        <div class="cost-value" id="foodAnalysisTotalFoods">0</div>
                        <div class="cost-period" id="foodAnalysisFoodsPeriod">7 derniers jours</div>
                    </div>
                </div>
                <div class="cost-card">
                    <div class="cost-icon">âš–ï¸</div>
                    <div class="cost-content">
                        <div class="cost-label">Poids Total</div>
                        <div class="cost-value" id="foodAnalysisTotalWeight">0 kg</div>
                        <div class="cost-period" id="foodAnalysisWeightPeriod">7 derniers jours</div>
                    </div>
                </div>
                <div class="cost-card">
                    <div class="cost-icon">ğŸ’°</div>
                    <div class="cost-content">
                        <div class="cost-label">CoÃ»t Total</div>
                        <div class="cost-value" id="foodAnalysisTotalCost">0 â‚¬</div>
                        <div class="cost-period" id="foodAnalysisCostPeriod">7 derniers jours</div>
                    </div>
                </div>
            </div>

            <!-- Tableau dÃ©taillÃ© -->
            <div class="food-analysis-table-container">
                <div class="food-analysis-table-header">
                    <h3>ğŸ“‹ DÃ©tail par Aliment</h3>
                    <div class="food-analysis-export-buttons">
                        <button class="export-btn" id="copyFoodAnalysisBtn" title="Copier dans le presse-papier">ğŸ“‹ Copier</button>
                        <button class="export-btn" id="exportFoodAnalysisCSVBtn" title="Exporter en CSV">ğŸ“¥ Export CSV</button>
                    </div>
                </div>
                
                <!-- SÃ©lecteur de colonnes -->
                <div class="food-analysis-columns-selector">
                    <span style="font-weight: 600; color: #667eea; margin-right: 15px;">ğŸ“Š Afficher :</span>
                    <label class="column-checkbox">
                        <input type="checkbox" class="column-toggle" data-column="proteins" checked>
                        <span>ğŸ¥© ProtÃ©ines</span>
                    </label>
                    <label class="column-checkbox">
                        <input type="checkbox" class="column-toggle" data-column="carbs" checked>
                        <span>ğŸ Glucides</span>
                    </label>
                    <label class="column-checkbox">
                        <input type="checkbox" class="column-toggle" data-column="fats" checked>
                        <span>ğŸ§ˆ Lipides</span>
                    </label>
                    <label class="column-checkbox">
                        <input type="checkbox" class="column-toggle" data-column="fibers">
                        <span>ğŸŒ¾ Fibres</span>
                    </label>
                    <label class="column-checkbox">
                        <input type="checkbox" class="column-toggle" data-column="sugars">
                        <span>ğŸ¬ Sucres</span>
                    </label>
                    <label class="column-checkbox">
                        <input type="checkbox" class="column-toggle" data-column="proteinsPer100g" checked>
                        <span>ğŸ’ª Prot/100g</span>
                    </label>
                    <label class="column-checkbox">
                        <input type="checkbox" class="column-toggle" data-column="proteinPrice" checked>
                        <span>ğŸ’° Prix/100g prot</span>
                    </label>
                </div>
                <div class="food-analysis-table-wrapper">
                    <table class="food-analysis-table" id="foodAnalysisTable">
                        <thead>
                            <tr>
                                <th class="sortable" data-sort="name">Aliment <span class="sort-icon">â¬</span></th>
                                <th class="sortable" data-sort="weight">Poids Total <span class="sort-icon">â¬</span></th>
                                <th class="sortable" data-sort="cost">Prix Total <span class="sort-icon">â¬</span></th>
                                <th class="sortable macro-column" data-sort="proteins" data-column="proteins">ProtÃ©ines <span class="sort-icon">â¬</span></th>
                                <th class="sortable macro-column" data-sort="carbs" data-column="carbs">Glucides <span class="sort-icon">â¬</span></th>
                                <th class="sortable macro-column" data-sort="fats" data-column="fats">Lipides <span class="sort-icon">â¬</span></th>
                                <th class="sortable macro-column" data-sort="fibers" data-column="fibers" style="display: none;">Fibres <span class="sort-icon">â¬</span></th>
                                <th class="sortable macro-column" data-sort="sugars" data-column="sugars" style="display: none;">Sucres <span class="sort-icon">â¬</span></th>
                                <th class="sortable macro-column" data-sort="proteinsPer100g" data-column="proteinsPer100g">Prot/100g <span class="sort-icon">â¬</span></th>
                                <th class="sortable macro-column" data-sort="proteinPrice" data-column="proteinPrice">Prix/100g prot <span class="sort-icon">â¬</span></th>
                            </tr>
                        </thead>
                        <tbody id="foodAnalysisTableBody">
                            <tr>
                                <td colspan="10" style="text-align: center; padding: 40px; color: #999;">
                                    Aucune donnÃ©e disponible
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Graphiques Top 10 -->
            <div class="stats-grid" style="margin-top: 30px;">
                <div class="chart-container">
                    <h3>âš–ï¸ Top 10 - Poids ConsommÃ©</h3>
                    <canvas id="foodAnalysisWeightChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>ğŸ’° Top 10 - CoÃ»t Total</h3>
                    <canvas id="foodAnalysisCostChart"></canvas>
                </div>
            </div>
            <!-- ===================================== -->
        </div>
    </div>

    <!-- =================== CONTENU DE L'ONGLET "OBJECTIFS" =================== -->
    <div id="goals-tab" class="tab-content">
        <h2 class="section-title">ğŸ”¥ Calculateur de SÃ¨che</h2>
        <p style="text-align: center; color: #666; margin-bottom: 30px; font-size: 1.1em;">DÃ©terminez votre apport calorique optimal pour perdre du gras</p>
        
        <div class="add-food-section">
            <form class="add-food-form" id="goalsForm">
                <div class="form-group" style="grid-column: 1 / -1;">
                    <label style="margin-bottom: 15px; font-size: 1em; font-weight: 600; color: var(--color-text-dark);">Sexe</label>
                    <div class="gender-selector">
                        <div class="gender-option">
                            <input type="radio" id="homme" name="sexe" value="homme" checked>
                            <label for="homme" class="gender-label">
                                <span class="emoji">ğŸ‘¨</span>
                                <span>Homme</span>
                            </label>
                        </div>
                        <div class="gender-option">
                            <input type="radio" id="femme" name="sexe" value="femme">
                            <label for="femme" class="gender-label">
                                <span class="emoji">ğŸ‘©</span>
                                <span>Femme</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="age">ğŸ‚ Ã‚ge (annÃ©es)</label>
                    <input type="number" id="age" min="15" max="100" placeholder="30" required>
                </div>

                <div class="form-group">
                    <label for="goalWeight">âš–ï¸ Poids (kg)</label>
                    <input type="number" id="goalWeight" min="30" max="300" step="0.1" placeholder="80" required>
                </div>

                <div class="form-group">
                    <label for="taille">ğŸ“ Taille (cm)</label>
                    <input type="number" id="taille" min="100" max="250" placeholder="175" required>
                </div>

                <div class="form-group">
                    <label for="activite">ğŸ‹ï¸ Niveau d'activitÃ© physique</label>
                    <select id="activite" required>
                        <option value="1.2">SÃ©dentaire (peu ou pas d'exercice)</option>
                        <option value="1.375">LÃ©gÃ¨rement actif (1-3 jours/semaine)</option>
                        <option value="1.55">ModÃ©rÃ©ment actif (3-5 jours/semaine)</option>
                        <option value="1.725">TrÃ¨s actif (6-7 jours/semaine)</option>
                        <option value="1.9">ExtrÃªmement actif (2x par jour, travail physique)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="deficit">ğŸ”¥ DÃ©ficit calorique souhaitÃ©</label>
                    <select id="deficit" required>
                        <option value="0.10">LÃ©ger - 10% (perte lente, prÃ©serve muscle)</option>
                        <option value="0.15">ModÃ©rÃ© - 15% (Ã©quilibrÃ©)</option>
                        <option value="0.20">Standard - 20% (perte efficace)</option>
                        <option value="0.25">Agressif - 25% (perte rapide)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="waterGoalInput">ğŸ’§ Objectif d'hydratation quotidien (ml)</label>
                    <input type="number" id="waterGoalInput" min="500" max="10000" step="100" value="2000" placeholder="2000">
                    <small style="color: #999; font-size: 0.85em; margin-top: 5px; display: block;">RecommandÃ© : 2000-3000 ml par jour</small>
                </div>

                <div class="form-group">
                    <label for="stepsGoalInput">ğŸ‘Ÿ Objectif de pas quotidien</label>
                    <input type="number" id="stepsGoalInput" min="1000" max="50000" step="1000" value="10000" placeholder="10000">
                    <small style="color: #999; font-size: 0.85em; margin-top: 5px; display: block;">RecommandÃ© : 10000 pas par jour</small>
                </div>

                <div class="form-group">
                    <label for="sugarsMaxInput">ğŸ¬ Seuil maximum de sucres (g/jour)</label>
                    <input type="number" id="sugarsMaxInput" min="0" max="200" step="1" value="25" placeholder="25">
                    <small style="color: #999; font-size: 0.85em; margin-top: 5px; display: block;">Limite haute : 50g | IdÃ©al : 25g par jour</small>
                </div>

                <div class="form-group">
                    <label for="fibersMinInput">ğŸŒ¾ Seuil minimum de fibres (g/jour)</label>
                    <input type="number" id="fibersMinInput" min="0" max="100" step="1" value="25" placeholder="25">
                    <small style="color: #999; font-size: 0.85em; margin-top: 5px; display: block;">RecommandÃ© : minimum 25g par jour</small>
                </div>

                <button type="submit" class="add-btn">Calculer et Sauvegarder</button>
            </form>
        </div>

        <!-- Section des rÃ©sultats -->
        <div id="goalsResults" style="margin-top: 40px; display: none;">
            <h2 class="section-title">ğŸ“Š Vos RÃ©sultats</h2>
            
            <div class="result-card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <span style="font-weight: 600; color: #555;">ğŸ’ª MÃ©tabolisme de Base (MB)</span>
                    <span style="font-size: 1.4em; font-weight: 700; color: #667eea;" id="goalMB">0 kcal</span>
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <span style="font-weight: 600; color: #555;">âš¡ DÃ©pense Ã‰nergÃ©tique Totale (DET)</span>
                    <span style="font-size: 1.4em; font-weight: 700; color: #667eea;" id="goalDET">0 kcal</span>
                </div>
            </div>

            <div class="result-card-highlight">
                <div style="display: flex; justify-content: space-between; align-items: center; position: relative; z-index: 1;">
                    <span style="font-weight: 600; color: white; font-size: 1.2em;">ğŸ¯ Calories pour la SÃ¨che</span>
                    <span style="font-size: 1.8em; font-weight: 700; color: white;" id="goalCalories">0 kcal</span>
                </div>
            </div>

            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3 style="margin: 0; color: #333; font-size: 1.3em;">ğŸ“Š RÃ©partition des Macronutriments</h3>
                <button class="edit-macros-btn" id="editMacrosBtn" style="padding: 8px 16px; background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 0.9em; display: none;">
                    âœï¸ Modifier
                </button>
            </div>
            <div class="summary">
                <div class="summary-item">
                    <h3>ğŸ¥© ProtÃ©ines</h3>
                    <p id="goalProteins" class="macro-display">0 g</p>
                    <input type="number" id="goalProteinsInput" class="macro-input" min="0" step="1" style="display: none; width: 100%; padding: 10px; border: 2px solid #667eea; border-radius: 8px; font-size: 1.2em; font-weight: 700; text-align: center;">
                </div>
                <div class="summary-item">
                    <h3>ğŸ¥‘ Lipides</h3>
                    <p id="goalFats" class="macro-display">0 g</p>
                    <input type="number" id="goalFatsInput" class="macro-input" min="0" step="1" style="display: none; width: 100%; padding: 10px; border: 2px solid #667eea; border-radius: 8px; font-size: 1.2em; font-weight: 700; text-align: center;">
                </div>
                <div class="summary-item">
                    <h3>ğŸš Glucides</h3>
                    <p id="goalCarbs" class="macro-display">0 g</p>
                    <input type="number" id="goalCarbsInput" class="macro-input" min="0" step="1" style="display: none; width: 100%; padding: 10px; border: 2px solid #667eea; border-radius: 8px; font-size: 1.2em; font-weight: 700; text-align: center;">
                </div>
            </div>
            <div id="macroEditActions" style="display: none; text-align: center; margin-top: 20px; gap: 10px;">
                <button class="add-btn" id="saveMacrosBtn" style="margin-right: 10px;">ğŸ’¾ Sauvegarder</button>
                <button class="cancel-btn" id="cancelMacrosBtn" style="background: #ef4444; color: white; padding: 12px 24px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">âŒ Annuler</button>
            </div>

            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 30px; margin-bottom: 20px;">
                <h3 style="margin: 0; color: #333; font-size: 1.3em;">ğŸ¯ Objectifs Bien-ÃŠtre</h3>
                <button class="edit-macros-btn" id="editWellnessBtn" style="padding: 8px 16px; background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 0.9em; display: none;">
                    âœï¸ Modifier
                </button>
            </div>
            <div class="summary">
                <div class="summary-item">
                    <h3>ğŸ’§ Hydratation</h3>
                    <p id="goalWaterDisplay" class="wellness-display">2000 ml</p>
                    <input type="number" id="goalWaterEditInput" class="wellness-input" min="500" max="10000" step="100" style="display: none; width: 100%; padding: 10px; border: 2px solid #06b6d4; border-radius: 8px; font-size: 1.2em; font-weight: 700; text-align: center;">
                </div>
                <div class="summary-item">
                    <h3>ğŸ‘Ÿ Pas</h3>
                    <p id="goalStepsDisplay" class="wellness-display">10000 pas</p>
                    <input type="number" id="goalStepsEditInput" class="wellness-input" min="1000" max="50000" step="1000" style="display: none; width: 100%; padding: 10px; border: 2px solid #06b6d4; border-radius: 8px; font-size: 1.2em; font-weight: 700; text-align: center;">
                </div>
            </div>
            <div id="wellnessEditActions" style="display: none; text-align: center; margin-top: 20px; gap: 10px;">
                <button class="add-btn" id="saveWellnessBtn" style="margin-right: 10px;">ğŸ’¾ Sauvegarder</button>
                <button class="cancel-btn" id="cancelWellnessBtn" style="background: #ef4444; color: white; padding: 12px 24px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">âŒ Annuler</button>
            </div>

            <div class="goals-info-box">
                <h4>ğŸ’¡ Conseils pour votre sÃ¨che</h4>
                <p>
                    â€¢ Pesez-vous 1 fois par semaine dans les mÃªmes conditions<br>
                    â€¢ Visez une perte de 0.5-1% de votre poids par semaine<br>
                    â€¢ Ajustez vos calories si la perte stagne pendant 2 semaines<br>
                    â€¢ Maintenez un apport Ã©levÃ© en protÃ©ines pour prÃ©server la masse musculaire<br>
                    â€¢ Hydratez-vous abondamment (3-4L d'eau par jour)
                </p>
            </div>
        </div>
    </div>

    <!-- =================== CONTENU DE L'ONGLET "ALIMENTS" =================== -->
    <div id="foods-tab" class="tab-content">
        <!-- Section pour ajouter un nouvel aliment -->
        <div class="add-food-section">
            <h2 class="section-title">â• Ajouter un Aliment</h2>
            <form class="add-food-form" id="addFoodForm">
                <!-- Nom -->
                <div class="form-group">
                    <label>Nom</label>
                    <input type="text" id="foodName" required>
                </div>
                
                <!-- Type de valeurs -->
                <div class="form-group">
                    <label>ğŸ“Š Type de valeurs</label>
                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                        <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                            <input type="radio" name="foodNutritionType" value="per100g" checked onchange="updateNutritionLabels('food')">
                            <span>100g</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                            <input type="radio" name="foodNutritionType" value="perPortion" onchange="updateNutritionLabels('food')">
                            <span>1 portion</span>
                        </label>
                    </div>
                </div>
                
                <!-- Poids portion (conditionnel) -->
                <div class="form-group" id="foodPortionWeightGroup" style="display: none;">
                    <label>âš–ï¸ Poids (g)</label>
                    <input type="number" step="1" id="foodPortionWeight" placeholder="125" min="1">
                </div>
                
                <!-- Valeurs nutritionnelles -->
                <div class="form-group">
                    <label><span id="foodCaloriesLabel">Cal (kcal)</span></label>
                    <input type="number" step="0.1" id="foodCalories" required>
                </div>
                <div class="form-group">
                    <label><span id="foodProteinsLabel">Prot (g)</span></label>
                    <input type="number" step="0.1" id="foodProteins" required>
                </div>
                <div class="form-group">
                    <label><span id="foodCarbsLabel">Gluc (g)</span></label>
                    <input type="number" step="0.1" id="foodCarbs" required>
                </div>
                <div class="form-group">
                    <label><span id="foodSugarsLabel">Sucres (g)</span></label>
                    <input type="number" step="0.1" id="foodSugars" required>
                </div>
                <div class="form-group">
                    <label><span id="foodFibersLabel">Fibres (g)</span></label>
                    <input type="number" step="0.1" id="foodFibers" required>
                </div>
                <div class="form-group">
                    <label><span id="foodFatsLabel">Lipides (g)</span></label>
                    <input type="number" step="0.1" id="foodFats" required>
                </div>
                
                <!-- Prix -->
                <div class="form-group">
                    <label>ğŸ’° Prix (Optionnel)</label>
                    <div style="display: flex; gap: 10px; margin-bottom: 8px;">
                        <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                            <input type="radio" name="foodPriceType" value="grams" checked onchange="updatePriceLabel('food')">
                            <span>g</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                            <input type="radio" name="foodPriceType" value="portions" onchange="updatePriceLabel('food')">
                            <span>p</span>
                        </label>
                    </div>
                    <div style="display: flex; gap: 8px; align-items: center; flex-wrap: nowrap;">
                        <input type="number" step="0.01" id="foodPrice" placeholder="4.50" min="0" style="width: 70px; min-width: 70px; flex-shrink: 0;">
                        <span style="flex-shrink: 0;">â‚¬</span>
                        <input type="number" step="1" id="foodPriceQuantity" placeholder="500" min="1" style="width: 70px; min-width: 70px; flex-shrink: 0;">
                        <span id="foodPriceLabel" style="flex-shrink: 0;">g</span>
                    </div>
                </div>
                
                <button type="submit" class="add-btn">Ajouter l'Aliment</button>
            </form>
        </div>

        <!-- Section pour voir et gÃ©rer les aliments existants -->
        <div class="foods-section" style="margin-top: 30px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; gap: 20px; flex-wrap: wrap;">
                <h2 class="section-title" style="margin-bottom: 0;">ğŸ¥— Liste des Aliments</h2>
                <div class="search-container">
                    <input type="text" id="foodSearchManage" placeholder="ğŸ” Rechercher un aliment..." class="search-input">
                </div>
            </div>
            <p style="color: #999; margin-bottom: 15px; font-size: 0.9em;">ğŸ’¡ Cliquez sur un aliment pour le modifier</p>
            <div class="foods-list" id="foodsListManage"></div>
            <p id="noResultsMessageManage" style="display: none; text-align: center; color: #999; padding: 20px;">ğŸ” Aucun aliment trouvÃ©</p>
        </div>
    </div>

    <!-- =================== CONTENU DE L'ONGLET "REPAS" =================== -->
    <div id="meals-tab" class="tab-content">
        <h2 class="section-title">ğŸ½ï¸ Mes Repas</h2>
        <p class="section-description">
            CrÃ©ez des repas composÃ©s Ã  partir de vos aliments existants. 
            Vous pourrez ensuite les ajouter rapidement Ã  votre suivi quotidien.
        </p>

        <!-- Bouton pour crÃ©er un nouveau repas -->
        <div style="text-align: center; margin-bottom: 30px;">
            <button id="createMealBtn" class="action-btn">â• CrÃ©er un nouveau repas</button>
        </div>

        <!-- Formulaire de crÃ©ation/Ã©dition de repas -->
        <div id="mealFormSection" class="meal-form-section" style="display: none;">
            <h3 id="mealFormTitle">CrÃ©er un nouveau repas</h3>
            <form id="mealForm">
                <!-- Nom du repas -->
                <div class="form-group">
                    <label>ğŸ“ Nom du repas</label>
                    <input type="text" id="mealName" placeholder="Ex: Poulet Riz LÃ©gumes" required>
                </div>

                <!-- Liste des ingrÃ©dients -->
                <div class="form-group">
                    <label>ğŸ¥˜ IngrÃ©dients</label>
                    <div id="mealIngredientsContainer" class="ingredients-container">
                        <!-- Les lignes d'ingrÃ©dients seront ajoutÃ©es dynamiquement -->
                    </div>
                    <button type="button" id="addIngredientBtn" class="secondary-btn">â• Ajouter un ingrÃ©dient</button>
                </div>

                <!-- Poids total de la recette -->
                <div class="form-group">
                    <label>âš–ï¸ Poids total de la recette</label>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <input type="number" id="mealTotalWeight" placeholder="CalculÃ© automatiquement..." min="1" step="1" style="flex: 1;">
                        <span style="font-weight: 600;">grammes</span>
                    </div>
                    <small style="color: #666; font-size: 0.9em; margin-top: 5px; display: block;">
                        âœ¨ <strong>CalculÃ© automatiquement</strong> en additionnant les ingrÃ©dients.<br>
                        ğŸ’¡ Vous pouvez l'ajuster manuellement (ex: si la recette perd de l'eau Ã  la cuisson).
                    </small>
                </div>

                <!-- Checkbox Portions ajustables -->
                <div class="form-group" style="margin-top: 20px;">
                    <label style="display: flex; align-items: center; gap: 10px; cursor: pointer; padding: 15px; background: #f8f9fa; border-radius: 8px; border: 2px solid transparent; transition: all 0.2s;">
                        <input type="checkbox" id="mealIsPortionAdjustable" style="width: 20px; height: 20px; cursor: pointer;">
                        <div style="flex: 1;">
                            <strong style="font-size: 1em; color: var(--color-primary);">âš™ï¸ Portions ajustables</strong>
                            <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
                                Permet d'ajuster individuellement les quantitÃ©s de chaque ingrÃ©dient lors de l'ajout au suivi quotidien
                            </div>
                        </div>
                    </label>
                </div>

                <!-- AperÃ§u des valeurs nutritionnelles -->
                <div class="meal-nutrition-preview" id="mealNutritionPreview">
                    <strong>Totaux nutritionnels :</strong> --
                </div>

                <!-- Boutons d'action -->
                <div class="form-actions">
                    <button type="submit" class="submit-btn">ğŸ’¾ Sauvegarder</button>
                    <button type="button" id="cancelMealBtn" class="cancel-btn">âŒ Annuler</button>
                </div>
            </form>
        </div>

        <!-- Liste des repas -->
        <div class="meals-list-section">
            <h3>ğŸ“‹ Mes repas crÃ©Ã©s</h3>
            <div id="mealsListContainer" class="meals-list">
                <!-- Les repas seront affichÃ©s ici -->
            </div>
        </div>
    </div>

    <!-- =================== CONTENU DE L'ONGLET "COMPARAISON" =================== -->
    <div id="comparison-tab" class="tab-content">
        <h2 class="section-title">âš–ï¸ Comparaison</h2>
        
        <!-- Toggle pour choisir entre Aliments et Repas -->
        <div class="comparison-mode-toggle">
            <button class="mode-toggle-btn active" data-mode="foods">
                ğŸ¥— Aliments
            </button>
            <button class="mode-toggle-btn" data-mode="meals">
                ğŸ½ï¸ Repas
            </button>
        </div>
        
        <!-- Section de sÃ©lection des aliments -->
        <div class="comparison-selector">
            <div class="selector-card">
                <h3 id="comparisonTitle">ğŸ” SÃ©lectionner les aliments Ã  comparer</h3>
                <p class="selector-description" id="comparisonDescription">Comparez de 2 Ã  3 aliments pour voir leurs diffÃ©rences nutritionnelles</p>
                
                <div class="food-selectors">
                    <div class="selector-item">
                        <label id="comparisonLabel1">ğŸ¥— Premier aliment</label>
                        <div class="search-container">
                            <input type="text" id="comparisonSearch1" placeholder="Rechercher..." class="search-input">
                        </div>
                        <select id="comparisonFood1" class="comparison-select">
                            <option value="">-- SÃ©lectionner --</option>
                        </select>
                    </div>
                    
                    <div class="selector-item">
                        <label id="comparisonLabel2">ğŸ– DeuxiÃ¨me aliment</label>
                        <div class="search-container">
                            <input type="text" id="comparisonSearch2" placeholder="Rechercher..." class="search-input">
                        </div>
                        <select id="comparisonFood2" class="comparison-select">
                            <option value="">-- SÃ©lectionner --</option>
                        </select>
                    </div>
                    
                    <div class="selector-item">
                        <label id="comparisonLabel3">ğŸ¥‘ TroisiÃ¨me aliment (optionnel)</label>
                        <div class="search-container">
                            <input type="text" id="comparisonSearch3" placeholder="Rechercher..." class="search-input">
                        </div>
                        <select id="comparisonFood3" class="comparison-select">
                            <option value="">-- SÃ©lectionner --</option>
                        </select>
                    </div>
                </div>
                
                <button id="compareBtn" class="compare-btn" disabled>âš–ï¸ Comparer</button>
            </div>
        </div>

        <!-- Section des rÃ©sultats de comparaison -->
        <div id="comparisonResults" class="comparison-results" style="display: none;">
            <!-- Options d'affichage -->
            <div class="comparison-options">
                <div class="option-group">
                    <label>ğŸ“Š QuantitÃ© de rÃ©fÃ©rence :</label>
                    <select id="comparisonMode" class="mode-select">
                        <option value="100g">100g (standard)</option>
                        <option value="calories">MÃªme calories (200 kcal)</option>
                        <option value="price">MÃªme prix (2â‚¬)</option>
                    </select>
                </div>
                <button id="copyComparisonBtn" class="action-btn">ğŸ“‹ Copier</button>
            </div>

            <!-- Graphique Radar -->
            <div class="chart-container radar-container">
                <h3>ğŸ“ˆ Vue d'ensemble nutritionnelle</h3>
                <canvas id="comparisonRadarChart"></canvas>
            </div>

            <!-- RÃ©sumÃ© rapide avec recommandations -->
            <div class="comparison-summary">
                <div class="summary-card winner-card">
                    <div class="summary-icon">ğŸ†</div>
                    <div class="summary-content">
                        <h4>Meilleur choix global</h4>
                        <p id="bestOverall">-</p>
                    </div>
                </div>
                <div class="summary-card protein-card">
                    <div class="summary-icon">ğŸ’ª</div>
                    <div class="summary-content">
                        <h4>Plus riche en protÃ©ines</h4>
                        <p id="bestProtein">-</p>
                    </div>
                </div>
                <div class="summary-card calorie-card">
                    <div class="summary-icon">ğŸƒ</div>
                    <div class="summary-content">
                        <h4>Moins calorique</h4>
                        <p id="lowestCalorie">-</p>
                    </div>
                </div>
                <div class="summary-card price-card">
                    <div class="summary-icon">ğŸ’°</div>
                    <div class="summary-content">
                        <h4>Plus Ã©conomique</h4>
                        <p id="bestPrice">-</p>
                    </div>
                </div>
            </div>

            <!-- Tableau comparatif dÃ©taillÃ© -->
            <div class="comparison-table-container">
                <h3>ğŸ“‹ Comparaison dÃ©taillÃ©e</h3>
                <div class="table-responsive">
                    <table class="comparison-table" id="comparisonTable">
                        <thead>
                            <tr>
                                <th>Indicateur</th>
                                <th id="header1">Aliment 1</th>
                                <th id="header2">Aliment 2</th>
                                <th id="header3" style="display: none;">Aliment 3</th>
                                <th>ğŸ† Meilleur</th>
                            </tr>
                        </thead>
                        <tbody id="comparisonTableBody">
                            <!-- Rempli dynamiquement -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- =================== CONTENU DE L'ONGLET "PARAMÃˆTRES" =================== -->
    <div id="settings-tab" class="tab-content">
        <h2 class="section-title">âš™ï¸ ParamÃ¨tres</h2>
        
        <!-- Section Gestion des DonnÃ©es -->
        <div class="settings-section">
            <div class="settings-card">
                <div class="settings-card-header">
                    <h3>ğŸ’¾ Gestion des DonnÃ©es</h3>
                    <p class="settings-description">Sauvegardez ou importez vos donnÃ©es pour les conserver en sÃ©curitÃ©</p>
                </div>
                <div class="settings-card-body">
                    <div class="settings-actions">
                        <div class="settings-action-item">
                            <div class="action-info">
                                <h4>ğŸ“¤ Exporter toutes les donnÃ©es</h4>
                                <p><strong>Sauvegarde complÃ¨te :</strong> Tous les repas quotidiens, objectifs, historique, eau, pas, activitÃ©s, aliments personnalisÃ©s et repas composÃ©s</p>
                                <small style="color: #666; display: block; margin-top: 5px;">ğŸ’¾ Utilisez ceci pour faire une sauvegarde de sÃ©curitÃ©</small>
                            </div>
                            <button id="export-btn" class="settings-btn export-btn">ğŸ’¾ Exporter tout</button>
                        </div>
                        
                        <div class="settings-action-item">
                            <div class="action-info">
                                <h4>ğŸ“¥ Importer une sauvegarde complÃ¨te</h4>
                                <p><strong>âš ï¸ Restauration complÃ¨te :</strong> Remplace toutes vos donnÃ©es actuelles par celles du fichier</p>
                                <small style="color: #ef4444; display: block; margin-top: 5px;">âš ï¸ Action irrÃ©versible - Vos donnÃ©es actuelles seront Ã©crasÃ©es</small>
                            </div>
                            <button id="import-btn" class="settings-btn import-btn">ğŸ“‚ Restaurer une sauvegarde</button>
                            <input type="file" id="fileInput" accept=".json" style="display: none;">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section Partage d'Aliments et Repas -->
        <div class="settings-section">
            <div class="settings-card">
                <div class="settings-card-header">
                    <h3>ğŸ“¦ Partage d'Aliments et Repas</h3>
                    <p class="settings-description">Partagez vos recettes et aliments personnalisÃ©s avec d'autres utilisateurs</p>
                    <small style="color: #10b981; display: block; margin-top: 8px;">
                        âœ¨ <strong>Fonctionnement :</strong> Export sÃ©lectif (vous choisissez quoi partager) â€¢ Import ajout uniquement (vos donnÃ©es sont conservÃ©es)
                    </small>
                </div>
                <div class="settings-card-body">
                    <div class="settings-actions">
                        <div class="settings-action-item">
                            <div class="action-info">
                                <h4>ğŸ“¤ Exporter une sÃ©lection</h4>
                                <p><strong>Pour partage :</strong> Choisissez les aliments et repas spÃ©cifiques Ã  partager</p>
                                <small style="color: #666; display: block; margin-top: 5px;">ğŸ“¦ Les ingrÃ©dients des repas sont automatiquement inclus</small>
                            </div>
                            <button id="exportDataBtn" class="settings-btn export-btn">âœ¨ SÃ©lectionner & Exporter</button>
                        </div>
                        
                        <div class="settings-action-item">
                            <div class="action-info">
                                <h4>ğŸ“¥ Importer des Ã©lÃ©ments partagÃ©s</h4>
                                <p><strong>Ajout uniquement :</strong> Ajoute de nouveaux aliments/repas sans toucher Ã  vos donnÃ©es existantes</p>
                                <small style="color: #10b981; display: block; margin-top: 5px;">âœ“ Les doublons sont automatiquement ignorÃ©s</small>
                            </div>
                            <button id="importDataBtn" class="settings-btn import-btn">ğŸ“‚ Importer un partage</button>
                            <input type="file" id="importFileInput" accept=".json" style="display: none;">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section Zone Dangereuse -->
        <div class="settings-section">
            <div class="settings-card danger-card">
                <div class="settings-card-header">
                    <h3>âš ï¸ Zone Dangereuse</h3>
                    <p class="settings-description">Actions irrÃ©versibles - utilisez avec prÃ©caution</p>
                </div>
                <div class="settings-card-body">
                    <div class="settings-actions">
                        <div class="settings-action-item">
                            <div class="action-info">
                                <h4>ğŸ”„ RÃ©initialiser toutes les donnÃ©es</h4>
                                <p>Supprime dÃ©finitivement tous les repas, objectifs et aliments personnalisÃ©s</p>
                            </div>
                            <button id="reset-btn" class="settings-btn reset-btn">ğŸ—‘ï¸ RÃ©initialiser</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section Informations -->
        <div class="settings-section">
            <div class="settings-card info-card">
                <div class="settings-card-header">
                    <h3>â„¹ï¸ Informations</h3>
                </div>
                <div class="settings-card-body">
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">Version</span>
                            <span class="info-value">1.0.0</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Stockage</span>
                            <span class="info-value">IndexedDB</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Framework</span>
                            <span class="info-value">Vanilla JS</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">Graphiques</span>
                            <span class="info-value">Chart.js</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <!-- =============================================
         MODALE DE MODIFICATION D'ALIMENT
         (cachÃ©e par dÃ©faut avec le CSS)
    ============================================= -->
    <div id="editFoodModal" class="modal">
        <div class="modal-content">
            <button class="modal-close-btn">&times;</button>
            <h3>Modifier l'Aliment</h3>
            <form id="editFoodForm" class="add-food-form">
                <input type="hidden" id="editFoodId">

                <!-- Nom -->
                <div class="form-group">
                    <label>Nom</label>
                    <input type="text" id="editFoodName" required>
                </div>
                
                <!-- Type de valeurs -->
                <div class="form-group">
                    <label>ğŸ“Š Type de valeurs</label>
                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                        <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                            <input type="radio" name="editFoodNutritionType" value="per100g" checked onchange="updateNutritionLabels('editFood')">
                            <span>100g</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                            <input type="radio" name="editFoodNutritionType" value="perPortion" onchange="updateNutritionLabels('editFood')">
                            <span>1 portion</span>
                        </label>
                    </div>
                </div>
                
                <!-- Poids portion (conditionnel) -->
                <div class="form-group" id="editFoodPortionWeightGroup" style="display: none;">
                    <label>âš–ï¸ Poids (g)</label>
                    <input type="number" step="1" id="editFoodPortionWeight" placeholder="125" min="1">
                </div>
                
                <!-- Valeurs nutritionnelles -->
                <div class="form-group">
                    <label><span id="editFoodCaloriesLabel">Cal (kcal)</span></label>
                    <input type="number" step="0.1" id="editFoodCalories" required>
                </div>
                <div class="form-group">
                    <label><span id="editFoodProteinsLabel">Prot (g)</span></label>
                    <input type="number" step="0.1" id="editFoodProteins" required>
                </div>
                <div class="form-group">
                    <label><span id="editFoodCarbsLabel">Gluc (g)</span></label>
                    <input type="number" step="0.1" id="editFoodCarbs" required>
                </div>
                <div class="form-group">
                    <label><span id="editFoodSugarsLabel">Sucres (g)</span></label>
                    <input type="number" step="0.1" id="editFoodSugars" required>
                </div>
                <div class="form-group">
                    <label><span id="editFoodFibersLabel">Fibres (g)</span></label>
                    <input type="number" step="0.1" id="editFoodFibers" required>
                </div>
                <div class="form-group">
                    <label><span id="editFoodFatsLabel">Lipides (g)</span></label>
                    <input type="number" step="0.1" id="editFoodFats" required>
                </div>
                
                <!-- Prix -->
                <div class="form-group">
                    <label>ğŸ’° Prix (Optionnel)</label>
                    <div style="display: flex; gap: 10px; margin-bottom: 8px;">
                        <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                            <input type="radio" name="editFoodPriceType" value="grams" checked onchange="updatePriceLabel('editFood')">
                            <span>g</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 5px; cursor: pointer;">
                            <input type="radio" name="editFoodPriceType" value="portions" onchange="updatePriceLabel('editFood')">
                            <span>p</span>
                        </label>
                    </div>
                    <div style="display: flex; gap: 8px; align-items: center; flex-wrap: nowrap;">
                        <input type="number" step="0.01" id="editFoodPrice" placeholder="4.50" min="0" style="width: 70px; min-width: 70px; flex-shrink: 0;">
                        <span style="flex-shrink: 0;">â‚¬</span>
                        <input type="number" step="1" id="editFoodPriceQuantity" placeholder="500" min="1" style="width: 70px; min-width: 70px; flex-shrink: 0;">
                        <span id="editFoodPriceLabel" style="flex-shrink: 0;">g</span>
                    </div>
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="add-btn">Sauvegarder</button>
                    <button type="button" class="reset-btn" id="cancelEditBtn">Annuler</button>
                </div>
            </form>
        </div>
    </div>

    <!-- =============================================
         MODALE D'AJOUT D'ACTIVITÃ‰ PERSONNALISÃ‰E
    ============================================= -->
    <div id="customActivityModal" class="modal">
        <div class="modal-content">
            <button class="modal-close-btn" id="closeCustomActivityModal">&times;</button>
            <h3>Nouvelle ActivitÃ© PersonnalisÃ©e</h3>
            <form id="customActivityForm">
                <div class="form-group">
                    <label>Nom de l'activitÃ©</label>
                    <input type="text" id="customActivityName" placeholder="Ex: Boxe, Danse, etc." required>
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="add-btn">Ajouter</button>
                    <button type="button" class="reset-btn" id="cancelCustomActivityBtn">Annuler</button>
                </div>
            </form>
        </div>
    </div>

    <!-- =============================================
         MODALE DE MODIFICATION D'ACTIVITÃ‰
    ============================================= -->
    <div id="editActivityModal" class="modal">
        <div class="modal-content">
            <button class="modal-close-btn" id="closeEditActivityModal">&times;</button>
            <h3>Modifier l'ActivitÃ©</h3>
            <form id="editActivityForm">
                <input type="hidden" id="editActivityIndex">
                <div class="form-group">
                    <label>ActivitÃ©</label>
                    <select id="editActivityType" class="activity-select">
                        <option value="">SÃ©lectionner...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>DurÃ©e (minutes)</label>
                    <input type="number" id="editActivityDuration" min="1" required>
                </div>
                <div class="form-group">
                    <label>Calories brÃ»lÃ©es</label>
                    <input type="number" id="editActivityCalories" min="0" required>
                </div>
                <div class="modal-buttons">
                    <button type="submit" class="add-btn">Sauvegarder</button>
                    <button type="button" class="reset-btn" id="cancelEditActivityBtn">Annuler</button>
                </div>
            </form>
        </div>
    </div>

    <!-- =============================================
         MODALE DE CONFIRMATION DE SUPPRESSION DE REPAS
    ============================================= -->
    <div id="deleteMealModal" class="modal">
        <div class="modal-content modal-confirm">
            <div class="modal-confirm-icon">
                ğŸ—‘ï¸
            </div>
            <h3>Supprimer ce repas ?</h3>
            <p class="modal-confirm-text">
                ÃŠtes-vous sÃ»r de vouloir supprimer le repas <strong id="deleteMealName"></strong> ?
            </p>
            <p class="modal-confirm-warning">
                âš ï¸ Cette action est irrÃ©versible.
            </p>
            <div class="modal-buttons">
                <button type="button" class="reset-btn" id="cancelDeleteMealBtn">Annuler</button>
                <button type="button" class="delete-btn" id="confirmDeleteMealBtn">Supprimer</button>
            </div>
        </div>
    </div>

    <!-- =============================================
         MODALE D'EXPORT DE SÃ‰LECTION
    ============================================= -->
    <div id="exportModal" class="modal">
        <div class="modal-content">
            <button class="modal-close-btn" id="closeExportModal">&times;</button>
            <h3>ğŸ“¤ Exporter une sÃ©lection</h3>
            
            <!-- Toggle entre aliments et repas -->
            <div class="export-mode-toggle" style="margin: 20px 0;">
                <button class="export-toggle-btn active" data-mode="foods">
                    ğŸ¥— Aliments
                </button>
                <button class="export-toggle-btn" data-mode="meals">
                    ğŸ½ï¸ Repas
                </button>
            </div>
            
            <!-- Liste des Ã©lÃ©ments Ã  sÃ©lectionner -->
            <div class="export-list-wrapper" style="max-height: 400px; overflow-y: auto; border: 2px solid #e5e7eb; border-radius: 8px; padding: 15px; background: #f9fafb;">
                <div id="exportListContainer">
                    <!-- Les items seront ajoutÃ©s dynamiquement -->
                </div>
            </div>
            
            <div class="modal-buttons" style="margin-top: 20px;">
                <button type="button" id="selectAllExportBtn" class="reset-btn">âœ“ Tout sÃ©lectionner</button>
                <button type="button" id="confirmExportBtn" class="add-btn">ğŸ“¤ Exporter la sÃ©lection</button>
            </div>
        </div>
    </div>

    <!-- =============================================
         MODALE D'AJUSTEMENT DES PORTIONS
    ============================================= -->
    <div id="adjustPortionsModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <button class="modal-close-btn" id="closeAdjustPortionsModal">&times;</button>
            <h3>âš™ï¸ Ajuster les portions</h3>
            <p id="adjustPortionsMealName" style="text-align: center; color: #666; margin-bottom: 20px; font-weight: 600;"></p>
            
            <!-- Conteneur des ingrÃ©dients ajustables -->
            <div id="adjustPortionsContainer" style="display: flex; flex-direction: column; gap: 15px; margin: 20px 0;">
                <!-- Les lignes d'ingrÃ©dients seront ajoutÃ©es dynamiquement -->
            </div>
            
            <!-- AperÃ§u nutritionnel en temps rÃ©el -->
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 12px; color: white; margin: 20px 0;">
                <div style="font-size: 0.9em; font-weight: 600; margin-bottom: 10px; opacity: 0.9;">ğŸ“Š Totaux nutritionnels :</div>
                <div id="adjustPortionsNutrition" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; font-size: 0.95em;">
                    <div><strong>Calories:</strong> <span id="adjustCal">0</span> kcal</div>
                    <div><strong>ProtÃ©ines:</strong> <span id="adjustProt">0</span>g</div>
                    <div><strong>Glucides:</strong> <span id="adjustCarbs">0</span>g</div>
                    <div><strong>Lipides:</strong> <span id="adjustFat">0</span>g</div>
                    <div><strong>Fibres:</strong> <span id="adjustFib">0</span>g</div>
                    <div><strong>Sucres:</strong> <span id="adjustSug">0</span>g</div>
                </div>
                <div id="adjustCostSection" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.3); font-size: 1.1em; font-weight: 600; display: none;">
                    ğŸ’° CoÃ»t total : <span id="adjustCost">0.00</span>â‚¬
                </div>
            </div>
            
            <!-- Boutons d'action -->
            <div class="modal-buttons">
                <button type="button" id="cancelAdjustPortionsBtn" class="cancel-btn">âŒ Annuler</button>
                <button type="button" id="confirmAdjustPortionsBtn" class="submit-btn">âœ“ Valider</button>
            </div>
        </div>
    </div>

    <!-- Script pour gÃ©rer les labels dynamiques -->
    <script>
        function updatePriceLabel(prefix) {
            const radioGrams = document.querySelector(`input[name="${prefix}PriceType"][value="grams"]`);
            const radioPortions = document.querySelector(`input[name="${prefix}PriceType"][value="portions"]`);
            const label = document.getElementById(`${prefix}PriceLabel`);
            
            if (radioPortions && radioPortions.checked) {
                label.textContent = 'p';
            } else {
                label.textContent = 'g';
            }
        }
        
        function updateNutritionLabels(prefix) {
            const radioPer100g = document.querySelector(`input[name="${prefix}NutritionType"][value="per100g"]`);
            const radioPerPortion = document.querySelector(`input[name="${prefix}NutritionType"][value="perPortion"]`);
            const portionWeightGroup = document.getElementById(`${prefix}PortionWeightGroup`);
            
            const isPerPortion = radioPerPortion && radioPerPortion.checked;
            
            // Afficher/masquer le champ de poids de portion
            if (portionWeightGroup) {
                portionWeightGroup.style.display = isPerPortion ? 'block' : 'none';
            }
            
            // Mettre Ã  jour tous les labels
            const suffix = isPerPortion ? '/p' : '';
            const labels = [
                {id: 'Calories', text: 'Cal (kcal)'},
                {id: 'Proteins', text: 'Prot (g)'},
                {id: 'Carbs', text: 'Gluc (g)'},
                {id: 'Sugars', text: 'Sucres (g)'},
                {id: 'Fibers', text: 'Fibres (g)'},
                {id: 'Fats', text: 'Lipides (g)'}
            ];
            
            labels.forEach(label => {
                const element = document.getElementById(`${prefix}${label.id}Label`);
                if (element) {
                    element.textContent = label.text + suffix;
                }
            });
        }
    </script>

    <!-- Le script principal de l'application, chargÃ© Ã  la fin -->
    <script src="js/app.js?v=20251030-1818" type="module"></script>
</body>

</html>